<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Polyglot ‚Äî Travel Flashcards</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f5f0e8;--card-front:#fffdf7;--card-back:#1a1a2e;--ink:#2c2c3a;--ink-light:#6b6b7b;--accent:#c0392b;--shadow:0 4px 24px rgba(0,0,0,.08),0 1px 3px rgba(0,0,0,.06);--shadow-hover:0 8px 40px rgba(0,0,0,.12),0 2px 6px rgba(0,0,0,.08)}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--ink);min-height:100vh;display:flex;flex-direction:column;align-items:center;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:0}
header{position:relative;z-index:1;text-align:center;padding:2.5rem 1rem .5rem;width:100%;max-width:640px}
header h1{font-family:'Instrument Serif',serif;font-size:clamp(2.2rem,6vw,3.2rem);font-weight:400;letter-spacing:-.02em}
header h1 em{font-style:italic;color:var(--accent)}
header p{margin-top:.3rem;font-size:.8rem;color:var(--ink-light);letter-spacing:.06em;text-transform:uppercase}
.stats{position:relative;z-index:1;display:flex;gap:1.5rem;justify-content:center;padding:.6rem 1rem;font-size:.8rem;color:var(--ink-light);font-variant-numeric:tabular-nums}
.stats span{font-weight:600;color:var(--ink)}
.filter-bar{position:relative;z-index:1;display:flex;gap:.4rem;justify-content:center;padding:0 1rem .5rem}
.filter-btn{font-family:'DM Sans',sans-serif;font-size:.7rem;font-weight:500;padding:.25rem .65rem;border-radius:20px;border:1px solid rgba(0,0,0,.08);background:0 0;color:var(--ink-light);cursor:pointer;transition:all .15s;letter-spacing:.03em}
.filter-btn:hover{border-color:rgba(0,0,0,.2);color:var(--ink)}
.filter-btn.active{background:var(--ink);color:#fff;border-color:var(--ink)}
.progress-wrap{position:relative;z-index:1;width:100%;max-width:520px;padding:0 1rem;margin-bottom:.5rem}
.progress-bar{height:3px;background:rgba(0,0,0,.06);border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:2px;transition:width .4s ease}
.card-wrap{position:relative;z-index:1;width:100%;max-width:520px;min-height:340px;perspective:1200px;cursor:pointer;padding:0 1rem;margin:.25rem 0;-webkit-tap-highlight-color:transparent}
.card{width:100%;min-height:340px;position:relative;transform-style:preserve-3d;transition:transform .55s cubic-bezier(.4,0,.2,1)}
.card.flipped{transform:rotateY(180deg)}
.card-face{position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;box-shadow:var(--shadow);transition:box-shadow .3s}
.card-wrap:hover .card-face{box-shadow:var(--shadow-hover)}
.card-front{background:var(--card-front);border:1px solid rgba(0,0,0,.06)}
.card-front::before{content:'';position:absolute;top:12px;left:12px;right:12px;bottom:12px;border:1px solid rgba(0,0,0,.04);border-radius:10px;pointer-events:none}
.type-badge{font-size:.6rem;text-transform:uppercase;letter-spacing:.15em;padding:.2rem .6rem;border-radius:10px;margin-bottom:.75rem}
.type-badge.noun{color:#1e3a5f;background:rgba(30,58,95,.08)}
.type-badge.adj{color:#7b3a8f;background:rgba(123,58,143,.08)}
.type-badge.verb{color:#1a6b3a;background:rgba(26,107,58,.08)}
.type-badge.phrase{color:#c0392b;background:rgba(192,57,43,.08)}
.front-word{font-family:'Instrument Serif',serif;font-size:clamp(1.8rem,6vw,2.8rem);text-align:center;line-height:1.2}
.front-hint{margin-top:1rem;font-size:.72rem;color:var(--ink-light);opacity:.5}
.card-back{background:var(--card-back);transform:rotateY(180deg);color:#e8e8f0;justify-content:flex-start;padding:1.3rem 1.8rem;overflow-y:auto}
.card-back::before{content:'';position:absolute;top:12px;left:12px;right:12px;bottom:12px;border:1px solid rgba(255,255,255,.06);border-radius:10px;pointer-events:none}
.back-echo{width:100%;text-align:center;font-size:.72rem;color:rgba(255,255,255,.25);margin-bottom:.6rem;font-family:'JetBrains Mono',monospace;letter-spacing:.05em}
.translation-row{width:100%;display:flex;align-items:baseline;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,.06)}
.translation-row:last-child{border-bottom:none}
.flag-label{width:52px;flex-shrink:0;font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;opacity:.5}
.flag-label.fr{color:#6ba3d6}.flag-label.es{color:#e6a07a}.flag-label.it{color:#7acc9a}.flag-label.lat{color:#d4b896}
.translation-text{font-family:'Instrument Serif',serif;font-size:clamp(1rem,3.2vw,1.4rem);line-height:1.35;flex:1}
.translation-text .art{font-family:'DM Sans',sans-serif;font-size:.7em;opacity:.45;margin-right:.15em}
.adj-pair{display:flex;flex-direction:column;gap:.1rem}
.adj-pair .gl{font-family:'JetBrains Mono',monospace;font-size:.5rem;opacity:.35;letter-spacing:.08em;margin-right:.3em}
.speak-btn{flex-shrink:0;width:28px;height:28px;border:none;background:rgba(255,255,255,.08);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:.5rem;transition:all .15s;color:rgba(255,255,255,.4);font-size:.75rem;line-height:1;padding:0}
.speak-btn:hover{background:rgba(255,255,255,.15);color:rgba(255,255,255,.7)}
.speak-btn:active{transform:scale(.9)}
.speak-btn.speaking{background:rgba(255,255,255,.18);color:#7acc9a;animation:pulse .8s ease infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.translation-row{align-items:center}
.controls{position:relative;z-index:1;display:flex;gap:.6rem;padding:.5rem 1rem 1rem;width:100%;max-width:520px;justify-content:center}
.btn{font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:600;border:none;border-radius:10px;padding:.6rem 1.3rem;cursor:pointer;transition:all .2s;letter-spacing:.02em}
.btn:active{transform:scale(.96)}
.btn-next{background:var(--ink);color:#fff;flex:1;max-width:180px}
.btn-next:hover{background:#3c3c4e}
.btn-ghost{background:0 0;color:var(--ink-light);border:1.5px solid rgba(0,0,0,.1)}
.btn-ghost:hover{border-color:rgba(0,0,0,.25);color:var(--ink)}
.kh{position:relative;z-index:1;display:flex;gap:1rem;justify-content:center;padding:0 1rem 2rem;font-size:.68rem;color:var(--ink-light);opacity:.4}
.kh kbd{font-family:'JetBrains Mono',monospace;font-size:.6rem;padding:.1rem .35rem;border:1px solid rgba(0,0,0,.15);border-radius:4px;margin-right:.2rem;background:rgba(255,255,255,.5)}
@media(max-width:480px){.card-wrap,.card{min-height:310px}.kh{display:none}.card-back{padding:1rem 1.2rem}.translation-row{padding:.35rem 0}}
@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.card-wrap{animation:fadeUp .5s ease both}.controls{animation:fadeUp .5s ease .1s both}
</style>
</head>
<body>
<header><h1>Poly<em>glot</em></h1><p>1,000 travel words ¬∑ FR ¬∑ ES ¬∑ IT ¬∑ Latin roots</p></header>
<div class="stats"><div>Card <span id="cardNum">1</span> / <span id="totalCards">1000</span></div><div>Seen <span id="seenCount">0</span></div></div>
<div class="filter-bar">
  <button class="filter-btn active" data-type="all">All</button>
  <button class="filter-btn" data-type="noun">Nouns</button>
  <button class="filter-btn" data-type="adj">Adjectives</button>
  <button class="filter-btn" data-type="verb">Verbs</button>
  <button class="filter-btn" data-type="phrase">Phrases</button>
</div>
<div class="progress-wrap"><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div></div>
<div class="card-wrap" id="cardWrap">
  <div class="card" id="card">
    <div class="card-face card-front"><div class="type-badge" id="typeBadge">noun</div><div class="front-word" id="frontWord">loading‚Ä¶</div><div class="front-hint">tap to flip</div></div>
    <div class="card-face card-back"><div class="back-echo" id="backEcho"></div><div id="backContent"></div></div>
  </div>
</div>
<div class="controls">
  <button class="btn btn-ghost" id="btnPrev">‚Üê Prev</button>
  <button class="btn btn-ghost" id="btnShuffle" title="Reshuffle">‚Üª</button>
  <button class="btn btn-next" id="btnNext">Next ‚Üí</button>
</div>
<div class="kh"><div><kbd>Space</kbd> flip</div><div><kbd>‚Üê</kbd><kbd>‚Üí</kbd> nav</div><div><kbd>S</kbd> shuffle</div></div>
<script>
let W=[],deck=[],cur=0,seen=new Set(),filt='all';
async function load(){try{const r=await fetch('words.json');W=await r.json()}catch(e){document.getElementById('frontWord').textContent='Error loading words.json';return}init()}
function shuf(a){const b=[...a];for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]]}return b}
function init(){deck=shuf(W.map((_,i)=>i).filter(i=>filt==='all'||W[i].type===filt));cur=0;document.getElementById('totalCards').textContent=deck.length;if(deck.length>0)show()}
function show(){
  const w=W[deck[cur]],card=document.getElementById('card');card.classList.remove('flipped');
  const b=document.getElementById('typeBadge');b.textContent=w.type;b.className='type-badge '+w.type;
  document.getElementById('frontWord').textContent=w.type==='noun'?w.en.replace(/^the\s+/i,''):w.en;
  document.getElementById('backEcho').textContent=w.en;
  const bc=document.getElementById('backContent');
  if(w.type==='noun')bc.innerHTML=nB(w);else if(w.type==='adj')bc.innerHTML=aB(w);else bc.innerHTML=pB(w);
  document.getElementById('cardNum').textContent=cur+1;
  seen.add(deck[cur]);document.getElementById('seenCount').textContent=seen.size;
  document.getElementById('progressFill').style.width=(seen.size/W.length*100)+'%';
}
function row(lang,cls,html,speakText,speakLang){const sb=speakLang?`<button class="speak-btn" onclick="event.stopPropagation();speak(this,'${speakText.replace(/'/g,"\\'")}','${speakLang}')" title="Listen">üîä</button>`:'';return`<div class="translation-row"><div class="flag-label ${cls}">${lang}</div><div class="translation-text">${html}</div>${sb}</div>`}
function nB(w){return row('French','fr',`<span class="art">${w.fr_art}</span> ${w.fr}`,w.fr_art+' '+w.fr,'fr-FR')+row('Spanish','es',`<span class="art">${w.es_art}</span> ${w.es}`,w.es_art+' '+w.es,'es-ES')+row('Italian','it',`<span class="art">${w.it_art}</span> ${w.it}`,w.it_art+' '+w.it,'it-IT')+row('Latin','lat',w.lat)}
function aB(w){return row('French','fr',`<div class="adj-pair"><div><span class="gl">M</span>${w.fr_m}</div><div><span class="gl">F</span>${w.fr_f}</div></div>`,w.fr_m,'fr-FR')+row('Spanish','es',`<div class="adj-pair"><div><span class="gl">M</span>${w.es_m}</div><div><span class="gl">F</span>${w.es_f}</div></div>`,w.es_m,'es-ES')+row('Italian','it',`<div class="adj-pair"><div><span class="gl">M</span>${w.it_m}</div><div><span class="gl">F</span>${w.it_f}</div></div>`,w.it_m,'it-IT')+row('Root','lat',w.lat)}
function pB(w){return row('French','fr',w.fr,w.fr,'fr-FR')+row('Spanish','es',w.es,w.es,'es-ES')+row('Italian','it',w.it,w.it,'it-IT')+row('Latin','lat',w.lat)}
function speak(btn,text,lang){
  speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(text);u.lang=lang;u.rate=0.85;
  // Try to find a good voice for this language
  const voices=speechSynthesis.getVoices();
  const match=voices.filter(v=>v.lang.startsWith(lang.split('-')[0]));
  if(match.length>0){
    // Prefer voices with "Google" or "Enhanced" or non-compact names
    const good=match.find(v=>v.name.includes('Google')||v.name.includes('Enhanced'))||match[0];
    u.voice=good;
  }
  btn.classList.add('speaking');
  u.onend=()=>btn.classList.remove('speaking');
  u.onerror=()=>btn.classList.remove('speaking');
  speechSynthesis.speak(u);
}
// Preload voices (Chrome loads them async)
speechSynthesis.getVoices();
if(speechSynthesis.onvoiceschanged!==undefined)speechSynthesis.onvoiceschanged=()=>speechSynthesis.getVoices();
function flip(){document.getElementById('card').classList.toggle('flipped')}
function next(){if(!deck.length)return;cur=(cur+1)%deck.length;show()}
function prev(){if(!deck.length)return;cur=(cur-1+deck.length)%deck.length;show()}
function reshuffle(){deck=shuf(deck);cur=0;if(deck.length>0)show()}
document.getElementById('cardWrap').addEventListener('click',flip);
document.getElementById('btnNext').addEventListener('click',e=>{e.stopPropagation();next()});
document.getElementById('btnPrev').addEventListener('click',e=>{e.stopPropagation();prev()});
document.getElementById('btnShuffle').addEventListener('click',e=>{e.stopPropagation();reshuffle()});
document.querySelectorAll('.filter-btn').forEach(b=>b.addEventListener('click',()=>{document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active'));b.classList.add('active');filt=b.dataset.type;init()}));
document.addEventListener('keydown',e=>{if(e.key===' '){e.preventDefault();flip()}if(e.key==='ArrowRight'||e.key==='Enter')next();if(e.key==='ArrowLeft')prev();if(e.key==='s'||e.key==='S')reshuffle()});
let tx=0;document.getElementById('cardWrap').addEventListener('touchstart',e=>{tx=e.changedTouches[0].screenX},{passive:true});
document.getElementById('cardWrap').addEventListener('touchend',e=>{const d=e.changedTouches[0].screenX-tx;if(Math.abs(d)>60){d<0?next():prev()}},{passive:true});
load();
</script>
</body>
</html>
